#! /bin/bash

#
#This is a collection of test scripts generated by monkey_test.jot boiled down by error_search.jot, 
#they all have the distinction of causing some version of the editor to crash, leak or hang up.
#These are randomly generated by an electronical monkey and so one should expect them to do anything 
#useful or even meaningful. The bugs they detected have all been fixed so they're only useful for regression testing.
#


   #The followind were causing a certain amount oth threshing.
   gdb -ex="set confirm off" --args jot_dev l99.t -in="%W; %WU= -height=5 -width=8; %WW= -width=17; %WY= -width=8; %W= -winno=0 -height=3; %W= -winno=0 -height=1 -delim; %a;"
   gdb -ex="set confirm off" --args jot_dev l99.t -in="%QY=date;  %W= -height=1;  %W= -winno=0 -delete; %a;"
    
   gdb -ex="set confirm off" --args jot_dev l99.t -in="%r=mt1/test1215190714.jot_boiled -asConsole; %a;"
   
   jot_dev ${JOT_RESOURCES}/test_table.txt -in="%b=tabcells -1; %b=leftoffset 100000000; w %a;"
   
   valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="z. %H=create 1000; %d~=crap;ol70ol98 %H=setfsect 123;  %H=destroy;? %a;" -st ; cat valg.log
      
   jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; ov/U=Top/ %h=create 10 U=Top; %h=data U=Top|Mid; %d~=Mid dummy; ov/U=Top|Mid/ %h=create 10 U=Top|Mid; %h=data U=Top|Mid|Bot; %d~=Bot dummy; z~ ov/U=Top|Mid|Bot/   hU %a;"      
        
   jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; ov/U=Top/   hU %a;
  
   gdb -ex="set confirm off" --args jot_dev t.t -in="%w 30; %I=/usr/include/stdio.h -seek=56;  %DW=abcdefghijklmnopqrstuvwxyz;  hW40  %B=tabstops -1; %a;" -st
      
   gdb -ex="set confirm off" --args jot_dev t.t -in="%r=mt1/test1026051540.jot_boiled -asConsole; %A;"
      
   gdb -ex="set confirm off" --args jot_dev t.t -in="%w 20; %r=mt1/test1025191838.jot_boiled -asConsole; %a" -st
   
   gdb -ex="set confirm off" --args jot_dev t.t -in="%w 20; %r=mt2/test1026002312.jot_boiled -asConsole; %a" -st
      
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%B=pathname /usr/include/stdio.h;? %I=;? (m-500k-0m500,)(m500k0,)%b=tabsort;? k92? %B=tabstops -1; \
%DW=abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz;? \
hW7? %a;"

   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; z~  %h=create 10;  %h=data abc; %d~=Mid dummy;  ov/abc/ ov.abc.? za OK %a" -st
   
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 X=; %h=data X=Top; %d~=Top dummy; z~ov/X=Top/? %s=verbose 7; %h=create 10;  %h=data mno; %d~=New dummy; %H=new def; %H=find def; k? p %a;" -st
   
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; z~ %h=create 10;  %h=data abc; %d~=Top dummy; ov/abc/ n.au ov&abc& %QU=file; O@ %a"
   
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%HV=create 74; \
%h=create 10 Y=; %h=data Y=Top; %d~=Top dummy; ov/Y=Top/ %h=create 10 Y=Top; %h=data Y=Top|Mid; %d~=Mid dummy; ov/Y=Top|Mid/ %h=create 10 Y=Top|Mid; %h=data Y=Top|Mid|Bot; %d~=Bot dummy; z~ ov/Y=Top|Mid|Bot/   \
%HV=add 123;  %h=create 10;  %h=data pqr; %d~=Top dummy; ov/pqr/  %HV=find 123;  %%k0  k?  k? %a;"

   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 Y=; %h=data Y=Top; %d~=Top dummy; ov/Y=Top/ %h=create 10 Y=Top; %h=data Y=Top|Mid; %d~=Mid dummy; z~ ov/Y=Top|Mid/ %h=create 10; %H=data jkl; ov_jkl_? %qY=tags; %a"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in=" \
%QV=dir /usr/include; %d~=/usr/include/stdio.h;ol61ol3 %H=setfsect pqr; obz$%b=unrestricted; ozm-0ol1o.m0onm-0 %h=create '~; ((v/ /r)0n.r3a$& %h=add '$; m, m)0 \
%HV=setfsect mno; %QW=stack; %H=create 22; %%%FV='~; j8 %%%FY='~; %d~=/usr/include/stdio.h;ol24ol62 %H=setfsect abc; \
%B=header 1234567890; ol1 %b=addtag -text=abc; %HW=destroy -all; k63 v-^abc def ghi^ %QV=buffer; %a;"

   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; z~ov/U=Top/   %QX=stack;  %h=create 10;  %h=data pqr; %d~=Top dummy; ov/pqr/  ov^pqr^?  %QX=date; %a;"
exit 0

    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%s=prompt; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="zv %h=create 10;  %h=data def; %d~=Top dummy; ov/ghi/? %d~=/usr/include/stdio.h;ol25ol44 %H=setfsect 123; %QV=date; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t \
       -in="%QU=version;? obz$%b=unrestricted; ozm-0ol1o.m0onm-0  %h=create '~; ? ((v/ /r)0n.r3a$& %h=add '$; m, m)0? %H=new 123;? %d~=/usr/include/stdio.h;ol82ol45 %H=setfsect ghi;? z.n.au %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%r=mt2/test1025233618.jot_boiled -asConsole; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%r=mt2/test1024183059.jot_boiled -asConsole; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%r=mt2/test1024200715.jot_boiled -asConsole; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%r=mt2/test1024205710.jot_boiled -asConsole; %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%r=mt2/test1024210714.jot_boiled -asConsole; %a;" -st ; cat valg.log

#Fixed in jot.c_171023_1648
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10; %h=data abc; zqn.a. z.%qx=keys; %a"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10; %h=data a; %d~=Sub-buffer A; ov/a/ %h=destroy; %qz=system; %a" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%HY=create 16; v-'Y %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 U=; %h=data U=Top; %d~=Top dummy; z~ ov/U=Top/ %HU=destroy; %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 X=; %h=data X=Top; %d~=Top dummy; z~ov/X=Top/ %QX=buffer; %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 1; f/jon/ %B=tabstops -1; %b=tagtype fred colourtag 5 2; %b=addtag fred; %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%q~=date; o@ %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 X=; %h=data X=Top; %d~=Top dummy; z~ov/X=Top/ %q~=date; %M='~; %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="hw? %a;"
echo Nobbled    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 1; f/jon/i/\t/r-0 %B=tabstops -1; %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 9; %w 0; %QX=heap;  m0  j-  %B=tabstops -1;  m-0 %b=tagtype X colour 3 5; (r10ol10ou %b=addtag X; m, m)0  r0 e-0 %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 9; %w 0; %QX=heap;  m0  j-  %B=tabstops -1;  m-0 %b=tagtype X colour 3 5; (r10ol10ou %b=addtag X; m, m)0  r0 r-e %a;" -st
echo Nobbled   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 9; %w 0; %b=tagtype fred colourtag 3 5;  b1m-0  %B=tabstops -1;  %b=addtag fred; %a;" -st
echo Nobbled   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 9; %w 0; %b=tagtype fred colourtag 3 5;  b1m-0  %B=tabstops -1; m %b=addtag fred; %a;" -st

   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 2; %w 0; %QX=file; %I=/usr/include/stdio.h -hold; %QV=dir /usr/include; hX10 ON? (m-500k-0m500,)(m500k0,)%b=tabsort; %B=tabstops 5 12 17 27 35; %~=96; %B=leftoffset '~; %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 2; %w 0; %h=create 10 X=; %h=data X=; %d~=Bot dummy; z~ i/abcdefghijklmnopqrstuvwxyz/bi/s'~/b2m-0  %h=create 10;  ((v/ /r)0n.r3a@& %h=add '@; m, m)0 %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 X=; %h=data X=; %d~=Bot dummy; z~ i/abcdef/bi/s'~/b2m-0  %h=create 10;  ((v/ /r)0n.r3a@& %h=add '@; m, m)0 %a;"
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 X=; %h=data X=Top; %d~=Top dummy; z~ov/X=Top/  zw %h=create 10;  %h=data jkl; ov/jkl/?  z.n.aw  n.ax %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 9; %w 0; %h=create 10 q=; %d~=Hello world; %h=data q=abc; ov/q=abc/ n.aq %a;" -st
   gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="z. %H=create 1000; %h=new one; %h=data two;  %H=data pqr; %QX=dir .; k63 %h=create 10 W=; %h=data W=Top; %d~=Top dummy; ov/W=Top/ %h=create 10 W=Top; \
      %h=data W=Top|Mid; %d~=Mid dummy; ov/W=Top|Mid/ %h=create 10 W=Top|Mid; %h=data W=Top|Mid|Bot; %d~=Bot dummy; z~ ov/W=Top|Mid|Bot/ z. ov/pqr/? %QW=date; OK z. %QY=keys; %a;" -st
exit 0
    
#      These leak - or misbehave with the memory in some way:
   valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%HU=create 90; %d~=Top dummy;  ol3ou %d~=abc;ol123ol456 %HU=setfsect vwxy; n.au %a;" -st ; cat valg.log -asConsole; %a;" -st" ; cat valg.log
    
   valgrind --leak-check=full --track-origins=yes --log-file=valg.log jot_dev t.t -in="%HU=create 90; %d~=Top dummy;  ol3ou %d~=abc;ol123ol456 %HU=setfsect vwxy; n.au %a;" -st ; cat valg.log
   
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%b=addtag -text=abcdefg;? %a;" ; 
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10 W=; %h=data W=Top; %d~=Top dummy;  ov/W=Top/ n.aw %a;" 
 echo Status = $?
    
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in=" \
      (ol123)50? \
      z. %H=create 1000; %h=new one; %h=data two; %h=setsect three; m-0 (%h=add '@; on %h=data data_'@ oaoa %h=setsect seek_'@; m)0 \
      %QW=stack;? \
      %h=create 10;  %h=data jkl; %d~=Top dummy; ov/123/? %a;"
 echo Status = $?


#./test527215219.jot
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; ON? OL69.13? ol123 ol456 %H=create 4;? %H=setsect 123;? %QY=stack;? %a;" -st ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t \
      -in="((v/ /r)0n.r3a$& %h=add '$; m, m)0? a~*? O#? zY? ol123 %h=create '~;? OP? s'~? O*?  ol123 ol456 %HY=setfsect pqr;? %QW=stack;? %a;" -st ; cat valg.log
    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w; %w 9; %w 0; %h=create 9; %h=data abc; ol123.456 ov/abc/ %qa=keys; %a;"
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 9; %h=data Undef; zqn.a. %a" ; cat valg.log
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 100;  %h=data Buf; %q~=buffer; z.ov/Buf/  zqn.a. %a" ; cat valg.log
    %q=keys giving invalid line in report for an empty line in a Buffer-type dataObj:
    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 100; %h=data Buf; %q~=date;m0 z. ov/Buf/ %qz=keys; %a;"

#./jot.c_170511_1724
    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; zw %QV=file;? %h=create 10; n.r3a$& %h=add '$; m? f'V? %H=new jkl;? s/./ b-? %H=destroy; y0 %a;" -st
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; \
      %QV=wd;?  OB?  obz$%b=unrestricted; ozm-0ol1o.m0onm-0 %h=create '~; ((v/ /r)0n.r3a$& %h=add '$; m, m)0?  %H=data vwxy;?  ov:vwxy:?  %QV=keys;? %a;" -st ; cat valg.log
    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="n.a~&? m-0ol1o.m0onm-0 %h=create '~; n.r3?a$& %h=add '$;?  %H=data def;?  ov_def_?  %QU=keys; %a;"
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; \
      %B=pathname /usr/include/stdio.h;? %I=;? obz$%b=unrestricted; ozm-0ol1o.m0onm-0 %h=create '~; ((v/ /r)0n.r3a$& %h=add '$; m, m)0? (m-500k-0m500,)(m500k0,)%b=tabsort;? \
      a8-*? %H=destroy -all;? k0 %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; %h=create 10; %h=data one; %h=delete one; %h=add one; m-0k0 %h=destroy -all; %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; %h=create 10; %h=data one; %h=delete one; m %h=add one; m-0k0 %h=destroy -all; %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; %h=create 10; %h=add one; m %h=add one; m-0k0 %h=destroy -all; %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%h=create 10; ol123ol456  %H=setsect ghi;? zqn.a. %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; %H=create 74;? %H=add stu;? %H=add mno;? %H=delete mno;? %h=destroy; %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; \
      %QY=file /usr/include/stdio.h;?  obz$%b=unrestricted; ozm-0ol1o.m0onm-0 %h=create '~; ((v/ /r)0n.r3a$& %h=add '$; m, m)0?  %H=add ghi;?  %HY=data 123;?  %H=new mno;?   %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; %H=create 13;?  OB?  OC?  %H=setsect pqr;?  %H=delete pqr;?  %QW=keys;?   %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0;  %h=create 10;  %H=data jkl;?  %H=delete jkl;?  %H=add jkl;? %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; \
      %QX=version;? %QW=stack;? hX? m-0ol1o.m0onm-0 %h=create 1; ((v/ /r)0n.r3a$& %h=add '$; m, m)0? %H=new jkl;? %QU=file /usr/include/stdiozzz.h;? %HW=add abc;? %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0;  ol-2147483648 o. w  %a;" -st ; cat valg.log
 echo Status = $?
    valgrind --leak-check=full --track-origins=yes --log-file=valg.log gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="%w 20; %w 0; OL84? %H=create 50;? OA? ol123ol456ol789 %H=setsect def;? %H=delete def;? %QW=keys;?  %a;" -st ; cat valg.log
 echo Status = $?
    gdb -ex="set confirm off" -ex="r" -ex="q" --args jot_dev t.t -in="OL84? %H=create 50;? OA? %H=setsect def;? %H=delete def;? %QW=keys;?  %a;" -st
